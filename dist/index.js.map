{"version":3,"file":"index.js","sources":["../index.js"],"sourcesContent":["import fs from \"fs\";\nimport path from \"path\";\n\nimport caller from \"caller\";\n\n\nexport function file(filePath, options = {}) {\n  const absolutePath = resolve(filePath, caller());\n  return fs.readFileSync(absolutePath, {\n    encoding: \"utf-8\",\n    ...options,\n  });\n}\n\nexport default file;\n\n// Three cases:\n// 1. absolute path (starts with /) => use as is\n// 2. relative path (starts with ./ or ../) => use path.resolve()\n// 3. module path: use require.resolve()\nexport function resolve(pathString, callerPath) {\n  if (callerPath === undefined) {\n    callerPath = caller();\n  }\n  \n  const { dir } = path.parse(pathString);\n  const isAbsolute = path.isAbsolute(pathString);\n  const isRelative = !isAbsolute && String(dir).startsWith(\".\");\n  const isModule = !isAbsolute && !isRelative;\n  \n  if (isAbsolute) {\n    return pathString;\n  } else if (isRelative) {\n    const callerDir = path.dirname(callerPath);\n    return path.resolve(callerDir, pathString);\n  } else if (isModule) {\n    return require.resolve(pathString);\n  } else {\n    const msg = `Can't resolve absolute path: ${pathString}`;\n    throw new Error(msg);\n  }\n}\n"],"names":["file","filePath","options","absolutePath","resolve","caller","fs","readFileSync","encoding","pathString","callerPath","undefined","path","parse","dir","isAbsolute","isRelative","String","startsWith","isModule","callerDir","dirname","require","msg","Error"],"mappings":";;;;;;AAMO,SAASA,IAAT,CAAcC,QAAd,EAAwBC,OAAxB,EAAsC;mCAAP,GAAG;;MACjCC,YAAY,GAAGC,OAAO,CAACH,QAAD,EAAWI,MAAM,EAAjB,CAA5B;SACOC,EAAE,CAACC,YAAH,CAAgBJ,YAAhB,EAA8B,mBACnCK,QAAQ,EAAE,QADyB;YAA9B,CAAP;;AAMF;;;;AAMA,AAAO,SAASJ,OAAT,CAAiBK,UAAjB,EAA6BC,UAA7B,EAAyC;MAC1CA,UAAU,KAAKC,SAAnB,EAA8B;IAC5BD,UAAU,GAAGL,MAAM,EAAnB;;;YAGcO,IAAI,CAACC,KAAL,CAAWJ,UAAX;EAARK;MACFC,UAAU,GAAGH,IAAI,CAACG,UAAL,CAAgBN,UAAhB,CAAnB;MACMO,UAAU,GAAG,CAACD,UAAD,IAAeE,MAAM,CAACH,GAAD,CAAN,CAAYI,UAAZ,CAAuB,GAAvB,CAAlC;MACMC,QAAQ,GAAG,CAACJ,UAAD,IAAe,CAACC,UAAjC;;MAEID,UAAJ,EAAgB;WACPN,UAAP;GADF,MAEO,IAAIO,UAAJ,EAAgB;QACfI,SAAS,GAAGR,IAAI,CAACS,OAAL,CAAaX,UAAb,CAAlB;WACOE,IAAI,CAACR,OAAL,CAAagB,SAAb,EAAwBX,UAAxB,CAAP;GAFK,MAGA,IAAIU,QAAJ,EAAc;WACZG,OAAO,CAAClB,OAAR,CAAgBK,UAAhB,CAAP;GADK,MAEA;QACCc,GAAG,GAAI,kCAA+Bd,UAAW;UACjD,IAAIe,KAAJ,CAAUD,GAAV,CAAN;;;;;;;;"}